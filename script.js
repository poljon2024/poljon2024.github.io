const genusList = {
    "okra": "Abelmoschus esculentus",
    "ladies finger": "Abelmoschus esculentus",
    "sapodilla": "Achras sapota",
    "kiwi": "Actinidia chinensis",
    "button mushroom": "Agaricus bisporus",
    "mushroom": "Agaricus spp",
    "green agave": "Agave atrovirens",
    "tung tree": "Aleurites spp",
    "leek": "Allium ampeloprasum",
    "onion": "Allium cepa",
    "leek": "Allium porrum",
    "garlic": "Allium sativum",
    "chives": "Allium schoenoprasum",
    "aloe vera": "Aloe vera",
    "galangal": "Alpinia officinarum",
    "cashew": "Anacardium occidentale",
    "pineapple": "Ananas comosus",
    "dill": "Anethum graveolens",
    "caraway": "Anisosciadium lanatum",
    "cherimoya": "Annona reticulata",
    "sugar apple": "Annona squamosa",
    "chervil": "Anthriscus cerefolium",
    "celery": "Apium graveolens",
    "peanut": "Arachis hypogaea",
    "areca nut": "Areca catechu",
    "horseradish": "Armoracia rusticana",
    "arracacha": "Arracacia xanthorhiza",
    "tarragon": "Artemisia dracunculus",
    "breadfruit": "Artocarpus altilis",
    "asparagus": "Asparagus officinalis",
    "quebracho": "Aspidosperma spp",
    "brazil nut": "Bertholletia excelsa",
    "beet": "Beta vulgaris",
    "cabbage": "Brassica oleracea capitata",
    "rapeseed": "Brassica napus",
    "cabbage": "Brassica oleracea",
    "broccoli": "Brassica oleracea Var.Italica",
    "cauliflower": "Brassica oleracea var. botrytis",
    "cabbage": "Brassica oleracea var. capitata",
    "mustard": "Brassica spp",
    "pigeon pea": "Cajanus cajan",
    "tea": "Camellia sinensis",
    "bell pepper": "Capsicum annuum",
    "pepper": "Capsicum spp",
    "capsicum":"Capsicum annuum",
    "papaya": "Carica papaya",
    "caraway": "Carum carvi",
    "pecan": "Carya illinoensis",
    "chestnut": "Castanea sativa",
    "kapok": "Ceiba pentandra",
    "carob": "Ceratonia siliqua",
    "quinoa": "Chenopodium quinoa",
    "chickpea": "Cicer arietinum",
    "endive": "Cichorium endivia",
    "chicory": "Cichorium intybus",
    "cinchona": "Cinchona spp",
    "watermelon": "Citrullus lanatus",
    "orange": "Citrus sinensis",
    "lime": "Citrus aurantifolia",
    "bitter orange": "Citrus aurantium",
    "bergamot": "Citrus bergamia",
    "pomelo": "Citrus grandis",
    "kaffir lime": "Citrus hystrix DC",
    "lemon": "Citrus limon",
    "citrus medica": "Citrus medica",
    "grapefruit": "Citrus paradisi",
    "tangerine": "Citrus reticulata",
    "sweet orange": "Citrus sinensis",
    "mandarin": "Citrus veticulata",
    "ivy gourd": "Coccinia grandis",
    "tindly": "Coccinia grandis",
    "coconut": "Cocos nucifera",
    "coffee": "Coffee spp",
    "taro": "Colocasia spp",
    "congo jute": "Corchorus olitorius",
    "coriander": "Coriandrum sativum",
    "hazelnut": "Corylus avellana",
    "melon": "Cucumis melo",
    "honeydew melon": "Cucumis melo Inodorus",
    "armenian cucumber": "Cucumis melo flexuosus",
    "cucumber": "Cucumis sativus",
    "pumpkin": "Cucurbita pepo",
    "ash gourd": "Benincasa Hispida", 
    "squash": "Cucurbita spp",
    "chow chow": "Cucurbita spp",
    "turmeric": "Curcuma longa",
    "guar": "Cyamopsis tetragonoloba",
    "quince": "Cydonia oblonga",
    "lemongrass": "Cymbopogon spp",
    "artichoke": "Cynara cardunculus",
    "carrot": "Daucus carota",
    "longan": "Dimocarpus longan",
    "yam": "Dioscorea spp",
    "persimmon": "Diospyros kaki",
    "loquat": "Eriobotrya japonica",
    "arugula": "Eruca Sativa",
    "fig": "Ficus carica",
    "fennel": "Foeniculum vulgare",
    "strawberry": "Fragaria spp",
    "maguey": "Furcraea macrophylla",
    "mangosteen": "Garcinia mangostana",
    "soybean": "Glycine max",
    "licorice": "Glycyrrhiza glabra",
    "grape leaves": "Vitis vinifera",
    "niger seed": "Guizotia abyssinica",
    "kenaf": "Hibiscus cannabinus",
    "barley": "Hordeum vulgare",
    "hops": "Humulus lupulus",
    "dragon fruit": "Hylocereus costaricensis",
    "yerba Mate": "Ilex paraguariensis",
    "sweet potato": "Iopmoea batatas",
    "walnut": "Juglans spp",
    "lettuce": "Lactuca sativa",
    "bottle gourd": "Lagenaria siceraria",
    "lavender": "Lavandula spp",
    "lentil": "Lens culinaris",
    "cress": "Lepidium sativum",
    "flax": "Linum usitatissimum",
    "litchi": "Litchi chinensis",
    "lupin": "Lupinus spp",
    "macadamia": "Macadamia spp",
    "apple": "Malus domestica",
    "crab apple": "Malus sylvestris",
    "mango": "Mangifera indica",
    "yuca": "Manihot esculenta",
    "chico fruit": "Manilkara zapota",
    "arrowroot": "Maranta arundinacea",
    "mint": "Mentha spp",
    "peppermint": "Mentha Ã— piperita",
    "medlar": "Mespilus germanica",
    "bitter melon": "Momordica charantia",
    "bitter gourd": "Momordica charantia",    
    "moringa": "Moringa oleifera",
    "drumstick": "Moringa oleifera",
    "mulberry": "Morus spp",
    "banana": "Musa acuminata",
    "banana leaves": "Musa acuminata",
    "plantain": "Musa paradisiaca",
    "green banana": "Musa paradisiaca",
    "abaca": "Musa textilis",
    "rambutan": "Nephelium lappaceum",
    "tobacco": "Nicotiana tabacum",
    "basil": "Ocimum basilicum",
    "olive": "Olea europaea",
    "sainfoin": "Onobrychis viciifolia",
    "marjoram": "Origanum majorana",
    "parsnip": "Pastinaca sativa",
    "perilla": "Perilla spp",
    "avocado": "Persea americana",
    "parsley": "Petroselinum crispum",
    "common bean": "Phaseolus vulgaris",
    "date": "Phoenix dactylifera",
    "new zealand flax": "Phormium tenax",
    "indian gooseberry": "Phyllanthus emblica",
    "goldenberry": "Physalis peruviana",
    "groundcherry": "Physalis spp",
    "anise": "Pimpinella anisum",
    "black Pepper": "Piper nigrum",
    "pistachio": "Pistacia spp",
    "pea": "Pisum sativum",
    "chinese potato": "Plectranthus rotundifolius",
    "purslane": "Portulaca oleracea",
    "tinda": "Praecitrullus fistulosus",
    "apricot": "Prunus armeniaca",
    "plum": "Prunus domestica",
    "almond": "Prunus dulcis",
    "peach": "Prunus persica",
    "cherry": "Prunus spp",
    "guava": "Psidium guajava",
    "pomegranate": "Punica granatum",
    "pear": "Pyrus communis",
    "radish": "Raphanus sativus",
    "redcurrant": "Ribes rubrum",
    "currant": "Ribes spp",
    "wild Rose": "Rosa davurica",
    "rosemary": "Rosmarinus officinalis",
    "bramble": "Rubus spp",
    "raspberry": "Rubus spp",
    "sugarcane": "Saccharum officinarum",
    "sage": "Salvia officinalis",
    "black salsify": "Scorzonera hispanica",
    "chayote": "Sechium edule",
    "sesame": "Sesamum indicum",
    "potato": "Solamum tuberosum",
    "tomato": "Solanum lycopersicum",
    "eggplant": "Solanum melongena",
    "pepino": "Solanum muricatum",
    "argel": "Solenostemma argel",
    "sorghum": "Sorghum bicolor",
    "spinach": "Spinacia oleracea",
    "sweet basil": "Ocimum basilicum",
    "tamarind": "Tamarindus indica",
    "desert truffle": "Terfeziaceae spp",
    "cocoa": "Theobroma cacao",
    "thyme": "Thymus vulgaris",
    "snake gourd": "Trichosanthes cucumerina",
    "trichosanthes": "Trichosanthes spp",
    "clover": "Trifolium spp",
    "fenugreek": "Trigonella foenum-graecum",
    "wheat": "Triticum spp",
    "blueberry": "Vaccinium spp",
    "corn salad": "Valerianella locusta",
    "vanilla": "Vanilla planifolia",
    "fava bean": "Vicia faba",
    "common Vetch": "Vicia sativa",
    "cowpea": "Vigna unguiculata",
    "grape": "Vitis vinifera",
    "grapes": "Vitis vinifera",
    "tannia": "Xanthosoma sagittifolium",
    "corn": "Zea mays",
    "ginger": "Zingiber officinale",
    "jujube": "Ziziphus jujuba",
    "kumquat": "Fortunella margarita",
    "vigna": "Vigna spp",
    "passion fruit" : "Passiflora edulis",
    "blackberries" : "Rubus fruticosus",
    "blackberry" : "Rubus fruticosus",
    "beans" : "Phaseolus vulgaris",
    "courgettes" : "Cucurbita pepo",
    "ride gourd": "Luffa Acutangula",
    "turnip" : "Brassica rapa",
    "broccolini" : "Brassica oleracea var. botrytis",
    "banana shallots" : "Allium Cepa",
    "kimono" : "Cucumis metuliferus",
    "kai lan baby" : "Brassica oleracea var. alboglabra",
    "tapioca" : "Manihot esculenta",
    "karapincha" : "Murraya koenigii",
    "topinambur" : "Helianthus tuberosus",
    "dushi button" : "Phyla Dulcis",
    "shallots oval" : "Allium ascalonicum",
    "jackfruit" : "Artocarpus heterophyllus",
    "cantaloupe" : "Cucumis melo",
    "rock melon" : "Cucumis melo",
    "nectarine" : "Prunus persica var. nucipersica",
    "kiwano" : "Cucumis metuliferus",
    
    
};

function searchGenus() {
    const input = document.getElementById('searchInput').value.toLowerCase();
    const genus = genusList[input];
    document.getElementById('genusDisplay').innerText = genus ? genus : 'Not Found';
}

function addToTable() {
    const genus = document.getElementById('genusDisplay').innerText;
    const name = document.getElementById('searchInput').value;
    document.getElementById('searchInput').focus();
    

    

    // Check if genus is found
    if (genus === 'Not Found' || genus === '') {
        alert('Please enter a valid fruit or vegetable name.');
        return;
    }

    document.getElementById('searchInput').value = '';
    document.getElementById('genusDisplay').innerText = '';

    const table = document.getElementById('resultTable').getElementsByTagName('tbody')[0];
    const newRow = table.insertRow();

    const cell1 = newRow.insertCell(0);
    const cell2 = newRow.insertCell(1);
    const cell3 = newRow.insertCell(2);
    const cell4 = newRow.insertCell(3);
    const cell5 = newRow.insertCell(4);
    const cell6 = newRow.insertCell(5);

    cell1.innerText = genus;
    cell1.setAttribute('data-label', 'Genus');
    cell2.innerText = name;
    cell2.setAttribute('data-label', 'Name');

    const quantityInput = document.createElement('input');
    quantityInput.type = 'number';
    quantityInput.min = '0';
    quantityInput.value = '';
    quantityInput.oninput = updateSummary;
    cell3.appendChild(quantityInput);
    cell3.setAttribute('data-label', 'Quantity');

    const wpiInput = document.createElement('input');
    wpiInput.type = 'number';
    wpiInput.step = '0.1';
    wpiInput.min = '0';
    wpiInput.value = '';
    wpiInput.oninput = function() {
        updateKilograms(newRow); // Call updateKilograms when WPI changes
    };

    wpiInput.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            const nextRow = newRow.nextElementSibling;
            if (nextRow) {
                const nextQuantityInput = nextRow.cells[2].getElementsByTagName('input')[0];
                nextQuantityInput.focus();
            }
        }
    });
    cell5.appendChild(wpiInput);
    cell5.setAttribute('data-label', 'WPI');


    const kilogramInput = document.createElement('input');
    kilogramInput.type = 'number';
    kilogramInput.step = '0.1';
    kilogramInput.min = '0';
    kilogramInput.value = '';
    kilogramInput.oninput = updateSummary;
    kilogramInput.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            const nextRow = newRow.nextElementSibling;
            if (nextRow) {
                const nextQuantityInput = nextRow.cells[2].getElementsByTagName('input')[0];
                nextQuantityInput.focus();
            }
        }
    });


    cell4.appendChild(kilogramInput);
    cell4.setAttribute('data-label', 'Kilograms');

    

    const buttonContainer = document.createElement('div');
    buttonContainer.className = 'button-container';

    const copyButton = document.createElement('button');
    copyButton.textContent = 'Copy';
    copyButton.onclick = function() {
        copyToClipboard(genus, copyButton);
    };
    buttonContainer.appendChild(copyButton);

    const deleteButton = document.createElement('button');
    deleteButton.textContent = 'Delete';
    deleteButton.onclick = function() {
        deleteRow(newRow);
    };
    buttonContainer.appendChild(deleteButton);

    cell6.appendChild(buttonContainer);

    updateSummary();
}

function updateKilograms(row) {
    
    const quantityInput = row.cells[2].querySelector('input[type="number"]');
    const wpiInput = row.cells[4].querySelector('input[type="number"]');
    const kilogramInput = row.cells[3].querySelector('input[type="number"]');
    const quantity = parseFloat(quantityInput.value) || 0;
    const wpi = parseFloat(wpiInput.value) || 0;

    kilogramInput.value = quantity * wpi;
    updateSummary();
}



function deleteRow(row) {
    const table = document.getElementById('resultTable').getElementsByTagName('tbody')[0];
    table.deleteRow(row.rowIndex - 1);
    updateSummary();
}



function updateSummary() {


    const table = document.getElementById('resultTable').getElementsByTagName('tbody')[0];
    let totalQuantity = 0;
    let totalKilograms = 0;


    for (let row of table.rows) {
        const quantityInput = row.cells[2].querySelector('input[type="number"]');
        const kilogramsInput = row.cells[3].querySelector('input[type="number"]');

        const quantity = parseFloat(quantityInput.value) || 0;
        const kilograms = parseFloat(kilogramsInput.value) || 0;

        totalQuantity += quantity;
        totalKilograms += kilograms;

    }

    document.getElementById('totalQuantity').innerText = totalQuantity;
    document.getElementById('totalKilograms').innerText = totalKilograms;
}

function calculateDifference() {
    const totalQuantity = parseInt(document.getElementById('totalQuantity').innerText);
    const totalKilograms = parseFloat(document.getElementById('totalKilograms').innerText);
    const randomQuantity = parseInt(document.getElementById('randomQuantityInput').value);
    const randomKilograms = parseFloat(document.getElementById('randomKilogramInput').value);

    const quantityDifference = randomQuantity - totalQuantity;
    const kilogramsDifference = randomKilograms - totalKilograms;

    document.getElementById('quantityDifference').innerText = quantityDifference;
    document.getElementById('kilogramsDifference').innerText = kilogramsDifference;
}

function clearData() {
    document.getElementById('searchInput').value = '';
    document.getElementById('genusDisplay').innerText = '';

    

    const table = document.getElementById('resultTable').getElementsByTagName('tbody')[0];
    table.innerHTML = '';

    document.getElementById('totalQuantity').innerText = '0';
    document.getElementById('totalKilograms').innerText = '0';

    document.getElementById('randomQuantityInput').value = '';
    document.getElementById('randomKilogramInput').value = '';

    document.getElementById('quantityDifference').innerText = '';
    document.getElementById('kilogramsDifference').innerText= '';
}

function copyToClipboard(text, button) {
    const tempInput = document.createElement('input');
    tempInput.value = text;
    document.body.appendChild(tempInput);
    tempInput.select();
    document.execCommand('copy');
    document.body.removeChild(tempInput);

    button.textContent = 'Copied';
    button.disabled = true;
    button.style.backgroundColor = '#7FFF00';

    setTimeout(function() {
        button.textContent = 'Copy';
        button.disabled = false;
        button.style.backgroundColor = '';
    }, 500);
}

document.getElementById('searchInput').addEventListener('input', function() {
    const input = this.value.toLowerCase();
    const datalist = document.getElementById('suggestions');
    datalist.innerHTML = '';

    for (const [key, value] of Object.entries(genusList)) {
        if (key.toLowerCase().startsWith(input)) {
            const option = document.createElement('option');
            option.value = key;
            datalist.appendChild(option);
        }
    }
});

document.getElementById('searchInput').addEventListener('keydown', function(event) {
    if (event.key === 'Enter') {
        event.preventDefault();
        searchGenus();
        document.getElementById('tableButton').focus();
    }
});

document.getElementById('addTab').addEventListener('keydown', function(event) {
    if (event.key === 'Enter') {
        event.preventDefault();
        addToTable();
        document.getElementById('searchInput').focus();
    }
});

document.getElementById('addDifference').addEventListener('keydown', function(event){
    if (event.key === 'Enter'){
        event.preventDefault();
        calculateDifference();
    }
});

document.addEventListener('keydown', function(event) {
    if (event.altKey) {
        event.preventDefault();
    }
});

document.addEventListener('keyup', function(event) {
    if (event.altKey) {
        event.preventDefault();
    }
});

    }
});

